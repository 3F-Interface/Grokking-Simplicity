## 6장

### 모든 동작을 불변성으로 만들 수 있는가?

중첩된 데이터를 사용해야 한다면 모든 동작이 불변성을 띄게 만들 수 있을지에 대해 의문이 들 수 있습니다.

### 일단 동작을 읽기와 쓰기 혹은 둘 다로 구분해보자.

일단 읽기는 아무것도 하지 않고 데이터에 대한 정보를 꺼내는 동작입니다.

쓰기는 데이터를 변경하는 동작입니다.

#### 장바구니 동작

1. 제품 갯수 가져오기 - 일기
2. 제품 이름으로 제품 가져오기 - 읽기
3. 제품 추가하기 - 쓰기
4. 제품 이름으로 제품 빼기 - 쓰기
5. 제품 이름으로 제품 구매 수량 바꾸기 - 쓰기

쓰기는 이전에 다루었던 **카피 앤 라이트**를 활용하면 됩니다

### 카피 앤 라이트 3가지 원칙

1. 복사본 만들기 
2. 복사본 변경하기 
3. 복사본 리턴하기

복사본을 만들고 변경하는 것에 자바스크립트 내장 함수를 이용하면 굉장히 편리합니다.

```js
// 복사하기
const arr = [1,2,3,4]
const duplicated = [...arr]

const obj = { name:'강우', age : 30}
const duplicatedObj = {...obj}
```

### 쓰기도 하면서 읽기도 하는 동작은 어떻게 처리하는 것이 좋을까요?

1. 읽기 쓰기 함수로 분리하여
2. 함수에서 값을 2개 리턴합니다.

### 불변 데이터 구조를 읽는 것은 계산입니다.

변경 가능한 데이터를 읽는 것은 액션입니다.

쓰기는 데이터를 변경 가능한 구조로 만듭니다.

### 중첩된 쓰기를 읽기로 바꾸기

중첩된 항목 중 일부를 바꾼다면 일부의 객체 혹은 배열만이 변경될 것이고 나머지 부분들은 그대로 사용할 것입니다. 모든 변경사항을 **카피앤 라이트** 통일한다면! 아무 문제 없을 것입니다. 하지만 어느 한 부분이라도 직접 변경하는 실수가 생긴다면 나머지 부분에 연쇄적으로 이상한 값으로 변경되는 것을 막을 순 없을 것입니다.